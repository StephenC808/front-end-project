---
interface Props {
	min: number;
	max: number;
}

let { min, max } = Astro.props;

if (!min) {min=1}
if (!max) {max=20}

---

<section class="container component-factorial py-2">
  <div>
    <canvas id="myChart"></canvas>
  </div>
</section>


<style></style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>

  import Chart from 'chart.js/auto'
  const ctx = document.getElementById('myChart');

  
  const response = await fetch(`http://api.weatherapi.com/v1/history.json?key=290d085fbcf34ab78fa184457241607&q=London&dt=2024-07-21`);
  const data = await response.json();
  console.log(data.forecast.forecastday[0].hour);
  var temp_labels=[];
  var temp_data=[];
  for (let i = 0; i < data.forecast.forecastday[0].hour.length; i++) {
    //console.log(i);
    temp_labels.push(data.forecast.forecastday[0].hour[i].time);
    temp_data.push(data.forecast.forecastday[0].hour[i].temp_c);

  } 
  

  new Chart(ctx, {
    type: 'bar',
    data: {
      //temp_labels//labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
      datasets: [{
        label: '# of Votes',
        data: temp_data,
        borderWidth: 1
      }],
      labels: temp_labels
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>